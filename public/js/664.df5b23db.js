"use strict";(self["webpackChunkrecetario_front"]=self["webpackChunkrecetario_front"]||[]).push([[664],{2664:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});a(4114);var t=a(6768),i=a(4232),n=a(5130);const r={key:1,class:"text-grey text-caption align-self-center"},o={key:1,class:"text-grey text-caption align-self-center"};function s(e,l,a,s,d,c){const u=(0,t.g2)("v-col"),p=(0,t.g2)("v-row"),m=(0,t.g2)("v-text-field"),k=(0,t.g2)("v-textarea"),b=(0,t.g2)("v-chip"),h=(0,t.g2)("v-select"),f=(0,t.g2)("v-btn"),g=(0,t.g2)("v-form"),F=(0,t.g2)("v-table"),v=(0,t.g2)("v-list-item"),_=(0,t.g2)("v-list"),V=(0,t.g2)("v-container");return(0,t.uX)(),(0,t.Wv)(V,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{class:"mb-8"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.Lk)("h4",null,(0,i.v_)(e.isEdit?`Editar receta ${e.recipe.name}`:"Nueva Receta"),1)])),_:1})])),_:1}),(0,t.bF)(g,{modelValue:e.recipeForm,"onUpdate:modelValue":l[20]||(l[20]=l=>e.recipeForm=l),ref:"recipeForm",onSubmit:(0,n.D$)(c.onSubmit,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(p,{class:"mb-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[21]||(l[21]=[(0,t.Lk)("h6",null,"Datos generales",-1)]))),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12",sm:"6"},{default:(0,t.k6)((()=>[l[22]||(l[22]=(0,t.Lk)("p",{class:"overline"},"Nombre",-1)),(0,t.bF)(m,{modelValue:e.recipe.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.recipe.name=l),placeholder:"Ingresa el nombre de la receta",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12",sm:"6"},{default:(0,t.k6)((()=>[l[23]||(l[23]=(0,t.Lk)("p",{class:"overline"},"Descripción corta",-1)),(0,t.bF)(m,{modelValue:e.recipe.shortDescription,"onUpdate:modelValue":l[1]||(l[1]=l=>e.recipe.shortDescription=l),placeholder:"Ingresa la descripción corta de la receta 0/200",variant:"underlined","persistent-counter":"",counter:"200",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[l[24]||(l[24]=(0,t.Lk)("p",{class:"overline"},"Descripción",-1)),(0,t.bF)(k,{modelValue:e.recipe.longDescription,"onUpdate:modelValue":l[2]||(l[2]=l=>e.recipe.longDescription=l),placeholder:"Ingresa la descripción de la receta",variant:"underlined","auto-grow":"",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12",sm:"6"},{default:(0,t.k6)((()=>[l[25]||(l[25]=(0,t.Lk)("p",{class:"overline"},"Categoría",-1)),(0,t.bF)(h,{modelValue:e.recipe.categories,"onUpdate:modelValue":l[3]||(l[3]=l=>e.recipe.categories=l),items:e.helpers.categories,"item-title":"name","item-value":"id",placeholder:"Selecciona una o varias categorías",chips:"",multiple:"",variant:"underlined","closable-chips":"",color:"primary"},{selection:(0,t.k6)((({item:l,index:a})=>[a<5?((0,t.uX)(),(0,t.Wv)(b,{key:0},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,i.v_)(l.name),1)])),_:2},1024)):(0,t.Q3)("",!0),5===a?((0,t.uX)(),(0,t.CE)("span",r," (+"+(0,i.v_)(e.value.length-5)+" otros) ",1)):(0,t.Q3)("",!0)])),_:1},8,["modelValue","items"])])),_:1}),(0,t.bF)(u,{cols:"12",sm:"6"},{default:(0,t.k6)((()=>[l[26]||(l[26]=(0,t.Lk)("p",{class:"overline"},"Dificultad",-1)),(0,t.bF)(h,{modelValue:e.recipe.difficult,"onUpdate:modelValue":l[4]||(l[4]=l=>e.recipe.difficult=l),items:e.helpers.difficulties,placeholder:"Selecciona la dificultad",variant:"underlined",color:"primary","item-title":"name","item-value":"value"},null,8,["modelValue","items"])])),_:1}),(0,t.bF)(u,{cols:"12",sm:"6"},{default:(0,t.k6)((()=>[l[27]||(l[27]=(0,t.Lk)("p",{class:"overline"},"Tiempo de elaboración (minutos)",-1)),(0,t.bF)(m,{modelValue:e.recipe.cookingTime,"onUpdate:modelValue":l[5]||(l[5]=l=>e.recipe.cookingTime=l),placeholder:"Ingresa el tiempo de elaboración en minutos",variant:"underlined",color:"primary",type:"number",min:"0",step:"10"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{class:"my-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[28]||(l[28]=[(0,t.Lk)("h6",null,"Ingredientes",-1)]))),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12",md:"2"},{default:(0,t.k6)((()=>[l[29]||(l[29]=(0,t.Lk)("p",{class:"overline"},"Porciones",-1)),(0,t.bF)(m,{modelValue:e.recipe.portions,"onUpdate:modelValue":l[6]||(l[6]=l=>e.recipe.portions=l),variant:"underlined",color:"primary",type:"number",min:"0",max:"50"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(g,{modelValue:e.ingredientForm,"onUpdate:modelValue":l[11]||(l[11]=l=>e.ingredientForm=l),onSubmit:(0,n.D$)(c.addIngredient,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12",md:"2"},{default:(0,t.k6)((()=>[l[30]||(l[30]=(0,t.Lk)("p",{class:"overline"},"Cantidad",-1)),(0,t.bF)(m,{modelValue:e.ingredient.amount,"onUpdate:modelValue":l[7]||(l[7]=l=>e.ingredient.amount=l),variant:"underlined",color:"primary",type:"number",min:"0"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12",md:"2"},{default:(0,t.k6)((()=>[l[31]||(l[31]=(0,t.Lk)("p",{class:"overline"},"Unidades",-1)),(0,t.bF)(h,{modelValue:e.ingredient.units,"onUpdate:modelValue":l[8]||(l[8]=l=>e.ingredient.units=l),items:e.helpers.ingredientsUnits,placeholder:"Unidad",variant:"underlined",color:"primary","item-title":"name","item-value":"id"},null,8,["modelValue","items"])])),_:1}),(0,t.bF)(u,{cols:"12",md:"5"},{default:(0,t.k6)((()=>[l[32]||(l[32]=(0,t.Lk)("p",{class:"overline"},"Ingrediente",-1)),(0,t.bF)(m,{modelValue:e.ingredient.name,"onUpdate:modelValue":l[9]||(l[9]=l=>e.ingredient.name=l),placeholder:"Nombre del ingrediente",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12",md:"3"},{default:(0,t.k6)((()=>[l[33]||(l[33]=(0,t.Lk)("p",{class:"overline"},"Alérgenos",-1)),(0,t.bF)(h,{modelValue:e.ingredient.allergens,"onUpdate:modelValue":l[10]||(l[10]=l=>e.ingredient.allergens=l),items:e.helpers.allergens,placeholder:"Indica alérgenos",chips:"",multiple:"",variant:"underlined","closable-chips":"",color:"primary","item-title":"name","item-value":"id"},{selection:(0,t.k6)((({item:l,index:a})=>[a<2?((0,t.uX)(),(0,t.Wv)(b,{key:0},{default:(0,t.k6)((()=>[(0,t.Lk)("span",null,(0,i.v_)(l.title),1)])),_:2},1024)):(0,t.Q3)("",!0),2===a?((0,t.uX)(),(0,t.CE)("span",o," (+"+(0,i.v_)(e.value.length-2)+" otros) ",1)):(0,t.Q3)("",!0)])),_:1},8,["modelValue","items"])])),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"ma-0",type:"submit"},{default:(0,t.k6)((()=>l[34]||(l[34]=[(0,t.eW)(" Añadir ingrediente + ")]))),_:1})])),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.Lk)("p",null,"Ingredientes añadidos para "+(0,i.v_)(e.recipe.portions)+" porciones",1)])),_:1})])),_:1})])),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{density:"comfortable",theme:"primary"},{default:(0,t.k6)((()=>[l[36]||(l[36]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{class:"text-left"}," Cantidad "),(0,t.Lk)("th",{class:"text-left"}," Unidades "),(0,t.Lk)("th",{class:"text-left"}," Ingrediente "),(0,t.Lk)("th",{class:"text-left"}," Alérgenos "),(0,t.Lk)("th",{class:"text-left"}," Opciones ")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.recipe.ingredients,(a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.name},[(0,t.Lk)("td",null,(0,i.v_)(a.amount),1),(0,t.Lk)("td",null,(0,i.v_)(a.units),1),(0,t.Lk)("td",null,(0,i.v_)(a.name),1),(0,t.Lk)("td",null,(0,i.v_)(e.allergenNames),1),l[35]||(l[35]=(0,t.Lk)("td",null,"Editar | Eliminar",-1))])))),128))])])),_:1})])),_:1})])),_:1}),(0,t.bF)(p,{class:"my-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[37]||(l[37]=[(0,t.Lk)("h6",null,"Utensilios",-1)]))),_:1})])),_:1}),(0,t.bF)(p,{class:"justify-space-between"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"6"},{default:(0,t.k6)((()=>l[38]||(l[38]=[(0,t.Lk)("p",{class:"overline"},"utensilios",-1)]))),_:1}),c.allSelected?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(u,{key:0,cols:"3"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{ref:"searchField",modelValue:e.search,"onUpdate:modelValue":l[12]||(l[12]=l=>e.search=l),label:"Buscar utensilios","hide-details":"","single-line":"",variant:"underlined",dense:""},null,8,["modelValue"])])),_:1}))])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{class:"d-flex"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.cookware,(l=>((0,t.uX)(),(0,t.CE)(t.FK,null,[e.selected.includes(l)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(v,{class:"px-2",key:l.id,disabled:e.loading,density:"compact","base-color":"white",rounded:"50px",variant:"plain",onClick:a=>e.selected.push(l)},{default:(0,t.k6)((()=>[(0,t.bF)(b,{disabled:e.loading,variant:"outlined",color:"success"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(l.name),1)])),_:2},1032,["disabled"])])),_:2},1032,["disabled","onClick"]))],64)))),256))])),_:1})])),_:1}),(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[39]||(l[39]=[(0,t.Lk)("p",{class:"overline"},"utensilios seleccionados",-1)]))),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(c.selections,((l,a)=>((0,t.uX)(),(0,t.Wv)(u,{key:l.name,class:"py-1 pe-0",cols:"auto"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{disabled:e.loading,closable:"","onClick:close":l=>e.selected.splice(a,1)},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(l.name),1)])),_:2},1032,["disabled","onClick:close"])])),_:2},1024)))),128))])),_:1}),(0,t.bF)(p,{class:"my-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[40]||(l[40]=[(0,t.Lk)("h6",null,"Instrucciones",-1)]))),_:1})])),_:1}),(0,t.bF)(g,{modelValue:e.instructionsForm,"onUpdate:modelValue":l[15]||(l[15]=l=>e.instructionsForm=l),onSubmit:(0,n.D$)(c.addInstruction,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12",sm:"2"},{default:(0,t.k6)((()=>[l[41]||(l[41]=(0,t.Lk)("p",{class:"overline"},"Paso",-1)),(0,t.bF)(m,{modelValue:e.instruction.step,"onUpdate:modelValue":l[13]||(l[13]=l=>e.instruction.step=l),placeholder:"#Ingresa el tiempo de elaboración en minutos",variant:"underlined",color:"primary",type:"number",min:"0",step:"10"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"12",sm:"10"},{default:(0,t.k6)((()=>[l[42]||(l[42]=(0,t.Lk)("p",{class:"overline"},"Instrucción",-1)),(0,t.bF)(m,{modelValue:e.instruction.description,"onUpdate:modelValue":l[14]||(l[14]=l=>e.instruction.description=l),placeholder:"Ingresa la instrucción",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"ma-0",type:"submit"},{default:(0,t.k6)((()=>l[43]||(l[43]=[(0,t.eW)(" Añadir instrucción + ")]))),_:1})])),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{density:"comfortable",theme:"primary"},{default:(0,t.k6)((()=>[l[45]||(l[45]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{class:"text-left"}," Instrucción "),(0,t.Lk)("th",{class:"text-left"}," Opciones ")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.recipe.instructions,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.step},[(0,t.Lk)("td",null,(0,i.v_)(e.step)+". "+(0,i.v_)(e.description),1),l[44]||(l[44]=(0,t.Lk)("td",null,"Editar | Eliminar",-1))])))),128))])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onSubmit"]),(0,t.bF)(p,{class:"my-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[46]||(l[46]=[(0,t.Lk)("h6",null,"Acompañamientos",-1)]))),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[l[47]||(l[47]=(0,t.Lk)("p",{class:"overline"},"Acompañamientos",-1)),(0,t.bF)(k,{modelValue:e.recipe.sideSuggestions,"onUpdate:modelValue":l[16]||(l[16]=l=>e.recipe.sideSuggestions=l),placeholder:"Ingresa las diferentes opciones de acompañamientos que puede tener esta receta",variant:"underlined","auto-grow":"",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,{class:"my-6"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>l[48]||(l[48]=[(0,t.Lk)("h6",null,"Multimedia",-1)]))),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"6"},{default:(0,t.k6)((()=>[l[49]||(l[49]=(0,t.Lk)("p",{class:"overline"},"Imagen en miniatura",-1)),(0,t.bF)(m,{modelValue:e.recipe.smallImage,"onUpdate:modelValue":l[17]||(l[17]=l=>e.recipe.smallImage=l),placeholder:"Arrastra y suelta una imagen",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"6"},{default:(0,t.k6)((()=>[l[50]||(l[50]=(0,t.Lk)("p",{class:"overline"},"Imagen principal",-1)),(0,t.bF)(m,{modelValue:e.recipe.largeImage,"onUpdate:modelValue":l[18]||(l[18]=l=>e.recipe.largeImage=l),placeholder:"Arrastra y suelta una imagen",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{cols:"6"},{default:(0,t.k6)((()=>[l[51]||(l[51]=(0,t.Lk)("p",{class:"overline"},"video tutorial",-1)),(0,t.bF)(m,{modelValue:e.recipe.video,"onUpdate:modelValue":l[19]||(l[19]=l=>e.recipe.video=l),placeholder:"Ingresa la URL del video tutorial",variant:"underlined",color:"primary"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{cols:"12"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{onClick:c.clearForm},{default:(0,t.k6)((()=>l[52]||(l[52]=[(0,t.eW)(" Cancelar ")]))),_:1},8,["onClick"]),(0,t.bF)(f,{class:"me-4",color:"primary",onClick:c.validateRecipeForm},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.isEdit?"Guardar Cambios":"Crear Receta"),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onSubmit"])])),_:1})}var d=a(4373),c=a(1387),u={data:()=>({recipeForm:!1,ingredientForm:!1,instructionsForm:!1,email:null,password:null,loading:!1,recipe:null,ingredient:{amount:"",units:"",name:"",allergens:[]},allergenNames:"",instruction:{step:0,description:""},helpers:{},search:"",selected:[],recipes:{},recipeId:null,isEdit:!1}),computed:{allSelected(){return this.selected.length===this.helpers.cookware.length},cookware(){const e=this.search.toLowerCase();return e?this.helpers.cookware.filter((l=>{const a=l.text.toLowerCase();return a.indexOf(e)>-1})):this.helpers.cookware},selections(){const e=[];for(const l of this.selected)e.push(l);return e}},watch:{selected(){this.search=""}},methods:{checkRecipeId(){},async loadEditingRecipeData(e){try{let l=`http://localhost:8080/recipes/${e}`;const a=await d.A.get(l,{headers:{"Content-Type":"application/json"},withCredentials:!1});this.recipe=a.data.recipe,this.recipe.ingredients!=[]&&(console.log("entra al if"),this.recipe.ingredients.forEach((e=>{this.mapAllergenNames(e.allergens)}))),this.helpers=a.data.helpers}catch(l){this.error="Error fetching recipes",console.error(l)}},async loadHelpers(){try{let e="http://localhost:8080/recipes/helpers";const l=await d.A.get(e,{headers:{"Content-Type":"application/json"},withCredentials:!1});this.helpers=l.data.helpers}catch(e){this.error="Error fetching recipes",console.error(e)}},onSubmit(){alert("Envío del formulario"),this.recipe&&this.axios.post("http://localhost:8080/recipes",this.recipe).then((function(e){console.log(e)})).catch((function(e){console.log(e)})).finally((function(){this.loading=!1}))},required(e){return!!e||"Field is required"},mapAllergenNames(e){this.allergenNames=e!=[]?e.map((e=>{const l=this.helpers.allergens.find((l=>l.id===e));return l?l.name:""})).join(", "):"Ninguno"},addIngredient(){this.recipe.ingredients.push(this.ingredient),this.mapAllergenNames(this.ingredient.allergens),this.ingredient={amount:"",units:"",name:"",allergens:[]}},addInstruction(){let e=this.instruction;alert(e)},clearForm(){this.$refs.recipeForm.reset()},validateRecipeForm(){alert("Envío del formulario")}},mounted(){const e=(0,c.lq)();e.params.id?(this.recipeId=e.params.id,this.isEdit=!0,this.loadEditingRecipeData(this.recipeId)):this.loadHelpers()}},p=a(1241);const m=(0,p.A)(u,[["render",s]]);var k=m}}]);
//# sourceMappingURL=664.df5b23db.js.map